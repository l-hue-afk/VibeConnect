<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BanterBox - Anonymous Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
    :root {
        /* New modern, dark theme color palette */
        --primary-color: #007bff;     /* Vibrant Blue for headers */
        --secondary-color: #3d9dff;   /* Lighter Blue for your messages */
        --accent-color: #ff9f1c;      /* Orange for buttons */
        --bg-dark: #121212;         /* Off-black background */
        --bg-foreground: #1e1e1e;    /* Dark gray for the chat container */
        --text-light: #e0e0e0;       /* Light gray for text */
        --text-dark: #333;          /* For text on light backgrounds (not used much) */
        --border-color: #333;       /* Subtle border color */
        --shadow-dark: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    /* --- General Layout & Background --- */
    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--bg-dark);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh; /* Full screen height */
        margin: 0;
        color: var(--text-light);
        overflow: hidden;
    }

    .chat-container {
        width: 95vw; /* 95% of viewport width */
        height: 95vh; /* 95% of viewport height */
        max-width: 1200px; /* Optional: set a max width for very large screens */
        background: var(--bg-foreground);
        border-radius: 15px;
        box-shadow: var(--shadow-dark);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        border: 1px solid var(--border-color);
    }

    /* --- Header & Status --- */
    .chat-header {
        background: var(--primary-color);
        color: white;
        padding: 15px 20px;
        font-weight: 600;
        font-size: 1.2em;
        text-align: center;
        flex-shrink: 0;
    }

    #status {
        text-align: center;
        padding: 10px;
        background: #2a2a2a;
        color: var(--text-light);
        font-weight: 400;
        font-size: 0.9em;
        flex-shrink: 0;
    }

    /* --- Messages Area --- */
    #messages {
        flex-grow: 1;
        overflow-y: auto;
        padding: 20px;
        list-style: none;
        margin: 0;
        background: var(--bg-foreground);
    }

    #messages li {
        margin-bottom: 12px;
        padding: 10px 15px;
        border-radius: 20px;
        max-width: 75%;
        line-height: 1.4;
    }

    .my-msg {
        background: var(--secondary-color);
        color: white;
        margin-left: auto;
        border-bottom-right-radius: 5px;
    }

    .partner-msg {
        background: #333;
        color: var(--text-light);
        margin-right: auto;
        border-bottom-left-radius: 5px;
    }
    
    /* --- Controls & Forms --- */
    #controls {
        padding: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
        background: var(--bg-foreground);
        border-top: 1px solid var(--border-color);
        flex-shrink: 0;
    }

    button {
        width: 100%;
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease-in-out; /* Transition for hover effect */
    }

    #start-button {
        background: var(--primary-color);
        color: white;
    }

    #message-form {
        padding: 15px;
        display: flex;
        gap: 10px;
        background: var(--bg-foreground);
        border-top: 1px solid var(--border-color);
        flex-shrink: 0;
    }

    #m {
        flex-grow: 1;
        padding: 10px 15px;
        border: 1px solid var(--border-color);
        border-radius: 25px;
        outline: none;
        background: #333;
        color: var(--text-light);
    }

    #message-form button {
        width: auto;
        padding: 10px 20px;
        background-color: var(--accent-color);
        color: white;
        border-radius: 25px;
        flex-shrink: 0;
    }

    /* --- ✨ Interactive Button Hover Effects --- */
    button:hover:not(:disabled) {
        filter: brightness(1.2);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    button:disabled {
        cursor: not-allowed;
        opacity: 0.6;
    }

    /* --- Auth Wall & Paywall --- */
    #auth-wall, #paywall {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(30, 30, 30, 0.98); /* Dark, semi-transparent background */
        z-index: 20;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
        text-align: center;
        border-radius: 15px;
    }
    
    #auth-wall h2, #paywall h2 {
        color: white;
    }

    .google-btn {
        background: #4285F4;
        color: white;
        width: 80%;
        max-width: 300px;
    }

    #paywall input, #paywall button {
        width: 80%;
        max-width: 300px;
        margin-top: 10px;
    }

    #paywall input {
        padding: 12px;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        background: #333;
        color: var(--text-light);
        text-align: center;
    }

    #paywall button {
        background-color: var(--accent-color);
        color: white;
    }
</style>
    
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div class="background-dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>

    <div class="chat-container">
        <div id="auth-wall" style="display: flex;">
            <h2>BanterBox</h2>
            <p>Log in to access your exclusive college chat.</p>
            <button id="google-login-btn" class="google-btn"><i class="fab fa-google"></i> Sign in with Google</button>
            <p style="margin-top: 10px; font-size: 0.8em;">Secure login. We don't share your name.</p>
        </div>

        <div id="paywall" style="display: none;">
            <h2>Subscription Required - ₹10/month</h2>
            <p>Please pay ₹10 to activate 30 days of access.</p>
            <a id="upi-pay-link" href="upi://pay?pa=7976167098@axl&am=10&cu=INR&pn=BanterBox%20Subscription" 
               target="_blank" style="text-decoration: none; width: 80%; max-width: 300px;">
                <button style="background-color: #28a745; margin-bottom: 15px;"><i class="fas fa-wallet"></i> Pay ₹10 Now (via UPI)</button>
            </a>
            <p style="margin-top: 15px;">After paying, enter your **UPI Transaction ID** (Ref No.) below:</p>
            <input type="text" id="tx-id-input" placeholder="Enter Transaction ID (Ref No.)" required>
            <button id="submit-tx-id">Submit for Verification</button>
            <p id="tx-status-msg" style="color: #dc3545; font-size: 0.9em; margin-top: 10px;"></p>
        </div>
        
        <div class="chat-header">BanterBox <i class="fas fa-comments"></i></div>
        <div id="status" class="info">Initializing...</div>
        <ul id="messages"></ul>
        <div id="controls"><button id="start-button" disabled>Start Chat</button></div>
        <form id="message-form" style="display: none;"><input id="m" autocomplete="off" placeholder="Type message..." /><button><i class="fas fa-paper-plane"></i></button></form>
    </div>
    <script src="script.js"></script>
</body>
</html>